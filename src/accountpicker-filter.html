<html><head><link rel="import" href="../bower_components/polymer/polymer-element.html"><link rel="import" href="/bower_components/polymer/lib/elements/dom-repeat.html"><link rel="import" href="/bower_components/polymer/lib/mixins/mutable-data.html"><link rel="import" href="../bower_components/paper-dialog/paper-dialog.html"><link rel="import" href="../bower_components/paper-button/paper-button.html"><link rel="import" href="../bower_components/paper-toggle-button/paper-toggle-button.html"><link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html"><script src="twitter-accounts.js"></script></head><body><dom-module id="accountpicker-filter"><template><style is="custom-style" include="iron-flex iron-flex-alignment">:host{display:block;}paper-dialog{width:60vw;}#accountpickers{display:flex;flex-direction:row;flex-flow:row wrap;width:100%;}paper-toggle-button{flex-grow:1;width:calc(100% * (1/4) - 10px - 1px);margin-top:20px;align-items:center;}</style><paper-dialog id="dialog"><div class="horizontal layout"><h2 class="flex">Filtro de Cuentas</h2><paper-toggle-button class="flex-none" checked="{{activeAyuntamiento}}">Ayuntamiento</paper-toggle-button><paper-toggle-button class="flex-none" checked="{{activePartidos}}">Partidos</paper-toggle-button></div><div id="accountpickers"><template is="dom-repeat" items="[[accounts]]" as="account"><paper-toggle-button partido$="[[_account_is_partido(account.fb_id)]]" checked="{{account.toggled}}">[[_account_nickname(account.fb_id)]]</paper-toggle-button></template></div><div class="buttons"><paper-button dialog-dismiss="">Descartar</paper-button><paper-button dialog-confirm="" autofocus="" on-tap="_handleOnTap">Aceptar</paper-button></div></paper-dialog></template><script>class AccountpickerFilter extends Polymer.MutableData(Polymer.Element){static get is(){return'accountpicker-filter'}static get properties(){return{activeAyuntamiento:{type:Boolean,value:!0,observer:'_activeAyuntamientoChanged'},activePartidos:{type:Boolean,value:!0,observer:'_activePartidosChanged'},accounts:{type:Array,value:function(){var a=[];for(var b in twitter_accounts)twitter_accounts.hasOwnProperty(b)&&a.push({fb_id:b,toggled:!0});return a}},accountsFiltered:{type:Array,computed:'_computeAccountsFiltered(accounts)',reflectToAttribute:!0,notify:!0}}}_computeAccountsFiltered(a){for(var b=[],c=0;c<a.length;c++)!1==a[c].toggled&&b.push(parseInt(a[c].fb_id));return console.log('NEW FILTER'),console.log(b),b}_activeAyuntamientoChanged(a){for(var c=this.$.accountpickers.children,d=0;d<c.length;d++)null==c[d].getAttribute('partido')&&(a?c[d].setAttribute('active',''):c[d].removeAttribute('active'))}_activePartidosChanged(a){for(var c=this.$.accountpickers.children,d=0;d<c.length;d++)null!=c[d].getAttribute('partido')&&(a?c[d].setAttribute('active',''):c[d].removeAttribute('active'))}_accountsChanged(){}_account_nickname(a){return void 0!=a&&twitter_accounts[a].nickname}_account_username(a){return void 0!=a&&twitter_accounts[a].username}_account_is_partido(a){return void 0!=a&&twitter_accounts[a].partido}_handleOnTap(){this.notifyPath('accounts'),this.notifyPath('accountsFiltered')}toggle(){this.$.dialog.toggle()}}window.customElements.define(AccountpickerFilter.is,AccountpickerFilter);</script></dom-module></body></html>